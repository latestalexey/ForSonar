{2,
{28,0,0,0,0,1,0,0,00000000-0000-0000-0000-000000000000,1,
{1,1,
{"ru","Партнеры"}
},0,0,1,1,1,0,1,0,
{1,9f2e5ddb-3492-4f5d-8f0d-416b8d1d5c5b,"ПриСозданииНаСервере"},
{0},1,
{17,
{-1,02023637-7868-4a5f-8576-835a76e0c9ba},0,0,1,
{0,
{0,
{"B",1},0}
},9,"ФормаКоманднаяПанель",
{1,0},
{1,0},0,1,0,0,0,2,2,
{3,4,
{0}
},
{6,3,0,1},
{0,0,0},1,
{0,0,1},8,a9f3b1ac-f51b-431e-b102-55a69acdecad,
{19,
{20,02023637-7868-4a5f-8576-835a76e0c9ba},0,1,
{0,
{0,
{"B",1},0}
},0,"ФормаОткрыть",
{1,1,
{"ru","Открыть"}
},1,
{1,409b9a53-7f7e-4178-86c1-33176c7c7a7a},
{0},2,0,0,0,2,2,0,0,0,
{3,4,
{0}
},
{3,4,
{0}
},
{3,4,
{0}
},
{6,3,0,1},
{0,0,0},0,
{3,1,
{-7},"",-1,-1,1,0},1,
{"Pattern"},"",0},a9f3b1ac-f51b-431e-b102-55a69acdecad,
{19,
{21,02023637-7868-4a5f-8576-835a76e0c9ba},0,1,
{0,
{0,
{"B",1},0}
},0,"ФормаДобавитьТорговуюСеть",
{1,1,
{"ru","автоматически"}
},1,
{2,409b9a53-7f7e-4178-86c1-33176c7c7a7a},
{0},2,0,0,0,2,2,0,0,0,
{3,4,
{0}
},
{3,4,
{0}
},
{3,4,
{0}
},
{6,3,0,1},
{0,0,0},0,
{3,1,
{0,977e831a-0e73-4d60-af51-091a6fa8612e},"",-1,-1,1,0},1,
{"Pattern"},"",0},a9f3b1ac-f51b-431e-b102-55a69acdecad,
{19,
{22,02023637-7868-4a5f-8576-835a76e0c9ba},0,1,
{0,
{0,
{"B",1},0}
},0,"ФормаДобавитьТСВручную",
{1,1,
{"ru","вручную"}
},1,
{4,409b9a53-7f7e-4178-86c1-33176c7c7a7a},
{0},2,0,0,0,2,2,0,0,0,
{3,4,
{0}
},
{3,4,
{0}
},
{3,4,
{0}
},
{6,3,0,1},
{0,0,0},0,
{3,1,
{0,977e831a-0e73-4d60-af51-091a6fa8612e},"",-1,-1,1,0},1,
{"Pattern"},"",0},a9f3b1ac-f51b-431e-b102-55a69acdecad,
{19,
{16,02023637-7868-4a5f-8576-835a76e0c9ba},0,1,
{0,
{0,
{"B",1},0}
},0,"ФормаНайти",
{1,0},1,
{1,c0519548-2a9a-44de-a25e-faf01e089d4d},
{0},0,0,0,0,2,2,0,0,0,
{3,4,
{0}
},
{3,4,
{0}
},
{3,4,
{0}
},
{6,3,0,1},
{0,0,0},0,
{3,0,
{0},"",-1,-1,1,0},1,
{"Pattern"},"",0},a9f3b1ac-f51b-431e-b102-55a69acdecad,
{19,
{17,02023637-7868-4a5f-8576-835a76e0c9ba},0,1,
{0,
{0,
{"B",1},0}
},0,"ФормаОтменитьПоиск",
{1,0},1,
{1,44ad3ec9-f3c2-4913-9224-5f9fb6418743},
{0},0,0,0,0,2,2,0,0,0,
{3,4,
{0}
},
{3,4,
{0}
},
{3,4,
{0}
},
{6,3,0,1},
{0,0,0},0,
{3,0,
{0},"",-1,-1,1,0},1,
{"Pattern"},"",0},a9f3b1ac-f51b-431e-b102-55a69acdecad,
{19,
{19,02023637-7868-4a5f-8576-835a76e0c9ba},0,1,
{0,
{0,
{"B",1},0}
},0,"ФормаВывестиСписок",
{1,0},1,
{1,825c1c15-ef8f-47ab-b002-e6b84b3e5b10},
{0},3,0,0,0,2,2,0,0,0,
{3,4,
{0}
},
{3,4,
{0}
},
{3,4,
{0}
},
{6,3,0,1},
{0,0,0},0,
{3,0,
{0},"",-1,-1,1,0},1,
{"Pattern"},"",0},a9f3b1ac-f51b-431e-b102-55a69acdecad,
{19,
{26,02023637-7868-4a5f-8576-835a76e0c9ba},0,1,
{0,
{0,
{"B",1},0}
},0,"ФормаУдалитьТорговуюСеть",
{1,0},1,
{3,409b9a53-7f7e-4178-86c1-33176c7c7a7a},
{0},3,0,0,0,2,0,0,0,0,
{3,4,
{0}
},
{3,4,
{0}
},
{3,4,
{0}
},
{6,3,0,1},
{0,0,0},0,
{3,1,
{0,60643198-e4b2-4c39-9de1-53cca3fff382},"",-1,-1,1,0},1,
{"Pattern"},"",2},a9f3b1ac-f51b-431e-b102-55a69acdecad,
{19,
{18,02023637-7868-4a5f-8576-835a76e0c9ba},0,1,
{0,
{0,
{"B",1},0}
},0,"ФормаНастройкаСписка",
{1,0},1,
{1,14559f7c-853c-42a4-9ea1-01546107747b},
{0},3,0,0,0,2,2,0,0,0,
{3,4,
{0}
},
{3,4,
{0}
},
{3,4,
{0}
},
{6,3,0,1},
{0,0,0},0,
{3,0,
{0},"",-1,-1,1,0},1,
{"Pattern"},"",0},1},1,143c00f7-a42d-4cd7-9189-88e4467dc768,
{42,
{1,02023637-7868-4a5f-8576-835a76e0c9ba},0,1,1,
{0,
{0,
{"B",1},0}
},"СписокПартнеров",0,0,1,
{1,0},
{1,0},
{1,
{2}
},0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,1,2,2,1,1,0,0,1,0,2,0,0,1,1,
{1,
{10000000}
},
{3,0,
{0},"",-1,-1,1,0},
{3,4,
{0}
},
{3,4,
{0}
},
{3,4,
{0}
},
{6,3,0,1},
{3,4,
{0}
},
{6,3,0,1},
{0,0,0},0,0,9,5,
{"B",0},6,
{"N",60},7,
{"#",2fdc88ec-7c9b-43cd-8ba5-873f043bdd88,
{0,00010101000000,00010101000000}
},8,
{"#",59ef2b80-c86b-11d5-a3c1-0050bae0a776,0},9,
{"B",0},10,
{"U"},11,
{"B",1},12,
{"B",0},14,
{"#",eac7bfa0-10b4-4369-996c-d258871ad519,0},
{4,1282f000-23b6-4887-87f4-9e8e79db3d32,"СписокПартнеровВыбор",2391e7b8-7235-45d7-ab7e-6ff3dc086396,"СписокПартнеровПередНачаломДобавления",2ccfdec5-583d-4eca-8319-e55de492665a,"СписокПартнеровПередУдалением",ab930362-ff94-4dcb-ad16-188805d23e3c,"СписокПартнеровПередНачаломИзменения"},
{0},1,
{17,
{2,02023637-7868-4a5f-8576-835a76e0c9ba},0,0,1,
{0,
{0,
{"B",1},0}
},8,"СписокПартнеровКонтекстноеМеню",
{1,0},
{1,0},0,1,0,0,0,2,2,
{3,4,
{0}
},
{6,3,0,1},
{0,0,0},1,
{1,0},3,a9f3b1ac-f51b-431e-b102-55a69acdecad,
{19,
{25,02023637-7868-4a5f-8576-835a76e0c9ba},0,1,
{0,
{0,
{"B",1},0}
},0,"СписокПартнеровКонтекстноеМенюОбновить",
{1,0},1,
{1,403bc6e6-b98e-4181-9f43-9c75cbbf82cf},
{0},3,0,0,0,2,2,0,0,0,
{3,4,
{0}
},
{3,4,
{0}
},
{3,4,
{0}
},
{6,3,0,1},
{0,0,0},0,
{3,0,
{0},"",-1,-1,1,0},1,
{"Pattern"},"",2},a9f3b1ac-f51b-431e-b102-55a69acdecad,
{19,
{24,02023637-7868-4a5f-8576-835a76e0c9ba},0,1,
{0,
{0,
{"B",1},0}
},0,"СписокПартнеровКонтекстноеМенюВывестиСписок",
{1,0},1,
{1,825c1c15-ef8f-47ab-b002-e6b84b3e5b10},
{0},3,0,0,0,2,2,0,0,0,
{3,4,
{0}
},
{3,4,
{0}
},
{3,4,
{0}
},
{6,3,0,1},
{0,0,0},0,
{3,0,
{0},"",-1,-1,1,0},1,
{"Pattern"},"",2},a9f3b1ac-f51b-431e-b102-55a69acdecad,
{19,
{23,02023637-7868-4a5f-8576-835a76e0c9ba},0,1,
{0,
{0,
{"B",1},0}
},0,"СписокПартнеровКонтекстноеМенюНайти",
{1,0},1,
{1,c0519548-2a9a-44de-a25e-faf01e089d4d},
{0},3,0,0,0,2,2,0,0,0,
{3,4,
{0}
},
{3,4,
{0}
},
{3,4,
{0}
},
{6,3,0,1},
{0,0,0},0,
{3,0,
{0},"",-1,-1,1,0},1,
{"Pattern"},"",2},1},1,
{17,
{3,02023637-7868-4a5f-8576-835a76e0c9ba},0,0,1,
{0,
{0,
{"B",1},0}
},9,"СписокПартнеровКоманднаяПанель",
{1,0},
{1,0},0,1,0,0,0,2,2,
{3,4,
{0}
},
{6,3,0,1},
{0,0,0},1,
{0,0,0},0,1},6,77ffcc29-7f2d-4223-b22f-19666e7250ba,
{30,
{4,02023637-7868-4a5f-8576-835a76e0c9ba},0,0,1,
{0,
{0,
{"B",1},0}
},1,"СписокПартнеровНаименование",1,0,
{1,0},
{1,0},
{2,
{2},
{1}
},
{0},1,0,2,0,2,
{1,0},
{1,0},1,1,0,3,0,3,1,3,0,
{3,0,
{0},"",-1,-1,1,0},
{3,0,
{0},"",-1,-1,1,0},
{3,4,
{0}
},
{6,3,0,1},
{3,4,
{0}
},
{3,4,
{0}
},
{3,4,
{0}
},
{6,3,0,1},
{0,0,0},1,
{9,0,0,2,2,2,
{1,0},0,
{3,4,
{0}
},
{3,4,
{0}
},
{6,3,0,1},2,
{0}
},
{0},1,
{17,
{5,02023637-7868-4a5f-8576-835a76e0c9ba},0,0,1,
{0,
{0,
{"B",1},0}
},8,"СписокПартнеровНаименованиеКонтекстноеМеню",
{1,0},
{1,0},0,1,0,0,0,2,2,
{3,4,
{0}
},
{6,3,0,1},
{0,0,0},1,
{1,1},0,1},1,
{"Pattern"},
{"Pattern"},"","",
{0},0},77ffcc29-7f2d-4223-b22f-19666e7250ba,
{30,
{6,02023637-7868-4a5f-8576-835a76e0c9ba},0,0,1,
{0,
{0,
{"B",1},0}
},1,"СписокПартнеровGLN",1,0,
{1,0},
{1,0},
{2,
{2},
{2}
},
{0},1,0,2,0,2,
{1,0},
{1,0},1,1,0,3,0,3,1,3,0,
{3,0,
{0},"",-1,-1,1,0},
{3,0,
{0},"",-1,-1,1,0},
{3,4,
{0}
},
{6,3,0,1},
{3,4,
{0}
},
{3,4,
{0}
},
{3,4,
{0}
},
{6,3,0,1},
{0,0,0},1,
{9,0,0,2,2,2,
{1,0},0,
{3,4,
{0}
},
{3,4,
{0}
},
{6,3,0,1},2,
{0}
},
{0},1,
{17,
{7,02023637-7868-4a5f-8576-835a76e0c9ba},0,0,1,
{0,
{0,
{"B",1},0}
},8,"СписокПартнеровGLNКонтекстноеМеню",
{1,0},
{1,0},0,1,0,0,0,2,2,
{3,4,
{0}
},
{6,3,0,1},
{0,0,0},1,
{1,1},0,1},1,
{"Pattern"},
{"Pattern"},"","",
{0},0},77ffcc29-7f2d-4223-b22f-19666e7250ba,
{30,
{8,02023637-7868-4a5f-8576-835a76e0c9ba},0,0,1,
{0,
{0,
{"B",1},0}
},1,"СписокПартнеровСсылка",1,0,
{1,0},
{1,0},
{2,
{2},
{3}
},
{0},1,0,2,0,2,
{1,0},
{1,0},1,1,0,3,0,3,1,3,0,
{3,0,
{0},"",-1,-1,1,0},
{3,0,
{0},"",-1,-1,1,0},
{3,4,
{0}
},
{6,3,0,1},
{3,4,
{0}
},
{3,4,
{0}
},
{3,4,
{0}
},
{6,3,0,1},
{0,0,0},1,
{9,0,0,2,2,2,
{1,0},0,
{3,4,
{0}
},
{3,4,
{0}
},
{6,3,0,1},2,
{0}
},
{0},1,
{17,
{9,02023637-7868-4a5f-8576-835a76e0c9ba},0,0,1,
{0,
{0,
{"B",1},0}
},8,"СписокПартнеровСсылкаКонтекстноеМеню",
{1,0},
{1,0},0,1,0,0,0,2,2,
{3,4,
{0}
},
{6,3,0,1},
{0,0,0},1,
{1,1},0,1},1,
{"Pattern"},
{"Pattern"},"","",
{0},0},77ffcc29-7f2d-4223-b22f-19666e7250ba,
{30,
{12,02023637-7868-4a5f-8576-835a76e0c9ba},0,0,1,
{0,
{0,
{"B",1},0}
},3,"СписокПартнеровТорговаяСеть",1,0,
{1,0},
{1,0},
{2,
{2},
{5}
},
{0},1,0,2,0,2,
{1,0},
{1,0},1,1,0,3,0,3,1,3,0,
{3,0,
{0},"",-1,-1,1,0},
{3,0,
{0},"",-1,-1,1,0},
{3,4,
{0}
},
{6,3,0,1},
{3,4,
{0}
},
{3,4,
{0}
},
{3,4,
{0}
},
{6,3,0,1},
{0,0,0},1,
{7,0,
{3,4,
{0}
},
{3,4,
{0}
}
},
{0},1,
{17,
{13,02023637-7868-4a5f-8576-835a76e0c9ba},0,0,1,
{0,
{0,
{"B",1},0}
},8,"СписокПартнеровТорговаяСетьКонтекстноеМеню",
{1,0},
{1,0},0,1,0,0,0,2,2,
{3,4,
{0}
},
{6,3,0,1},
{0,0,0},1,
{1,1},0,1},1,
{"Pattern"},
{"Pattern"},"","",
{0},0},77ffcc29-7f2d-4223-b22f-19666e7250ba,
{30,
{10,02023637-7868-4a5f-8576-835a76e0c9ba},0,0,1,
{0,
{0,
{"B",1},0}
},3,"СписокПартнеровПоставщик",1,0,
{1,0},
{1,0},
{2,
{2},
{4}
},
{0},1,0,2,0,2,
{1,0},
{1,0},1,1,0,3,0,3,1,3,0,
{3,0,
{0},"",-1,-1,1,0},
{3,0,
{0},"",-1,-1,1,0},
{3,4,
{0}
},
{6,3,0,1},
{3,4,
{0}
},
{3,4,
{0}
},
{3,4,
{0}
},
{6,3,0,1},
{0,0,0},1,
{7,0,
{3,4,
{0}
},
{3,4,
{0}
}
},
{0},1,
{17,
{11,02023637-7868-4a5f-8576-835a76e0c9ba},0,0,1,
{0,
{0,
{"B",1},0}
},8,"СписокПартнеровПоставщикКонтекстноеМеню",
{1,0},
{1,0},0,1,0,0,0,2,2,
{3,4,
{0}
},
{6,3,0,1},
{0,0,0},1,
{1,1},0,1},1,
{"Pattern"},
{"Pattern"},"","",
{0},0},77ffcc29-7f2d-4223-b22f-19666e7250ba,
{30,
{14,02023637-7868-4a5f-8576-835a76e0c9ba},0,0,1,
{0,
{0,
{"B",1},0}
},1,"СписокПартнеровСтандартнаяКартинка",1,0,
{1,0},
{1,0},
{2,
{2},
{10000000}
},
{0},1,0,2,0,2,
{1,0},
{1,0},1,1,0,3,0,3,1,3,0,
{3,0,
{0},"",-1,-1,1,0},
{3,0,
{0},"",-1,-1,1,0},
{3,4,
{0}
},
{6,3,0,1},
{3,4,
{0}
},
{3,4,
{0}
},
{3,4,
{0}
},
{6,3,0,1},
{0,0,0},1,
{9,0,0,2,2,2,
{1,0},0,
{3,4,
{0}
},
{3,4,
{0}
},
{6,3,0,1},2,
{0}
},
{0},1,
{17,
{15,02023637-7868-4a5f-8576-835a76e0c9ba},0,0,1,
{0,
{0,
{"B",1},0}
},8,"СписокПартнеровСтандартнаяКартинкаКонтекстноеМеню",
{1,0},
{1,0},0,1,0,0,0,2,2,
{3,4,
{0}
},
{6,3,0,1},
{0,0,0},1,
{1,1},0,1},0,
{"Pattern"},
{"Pattern"},"","",
{0},0},2,2,1,0,
{"Pattern"},"","",0,2},"","",1,
{17,
{0},0,0,0,7,"Navigator",
{1,0},
{1,0},0,1,0,0,0,2,2,
{3,4,
{0}
},
{6,3,0,1},
{0,0,0},0,0,1}
},"&НаСервере
Перем ОбработкаОбъект; 

&НаСервере
//инициализация модуля и его экспортных функций
Функция МодульОбъекта()

	Если ОбработкаОбъект=Неопределено Тогда
		ОбработкаОбъект = РеквизитФормыВЗначение(""Объект"");
		ОбработкаОбъект.ИнициализироватьПодключаемыеМодули();
	КонецЕсли;	
	
	Возврат ОбработкаОбъект;
	
КонецФункции 

&НаКлиенте
Функция ПолучитьФормуОбработки(ИмяФормы, ПараметрыФормы = Неопределено , ВладелецФормы  = Неопределено, КлючУникальности = Неопределено, ЗакрыватьПризакрытииВладельца = Ложь)
	
	ПолучаемаяФорма=	ПолучитьФорму(ПутьКФормам+ИмяФормы
										, ПараметрыФормы
										,
										, КлючУникальности);
	
	Если НЕ ВладелецФормы = Неопределено Тогда
		ПолучаемаяФорма.ВладелецФормы=	ВладелецФормы;
	КонецЕсли;
	
	Возврат ПолучаемаяФорма;
	
КонецФункции

&НаКлиенте
Процедура КоманднаяПанельТСОткрыть(Кнопка)
		
	ОткрытьФормуТорговойСети();
	
КонецПроцедуры

&НаКлиенте
Процедура ОткрытьФормуТорговойСети()
	
	ТекСтрока = Элементы.СписокПартнеров.ТекущиеДанные;
	
	Если НЕ ТекСтрока=Неопределено Тогда
		Если ЗначениеЗаполнено(ТекСтрока.Ссылка) Тогда
			
			ПараметрыФормы=	Новый Структура;
			ПараметрыФормы.Вставить(""СсылкаНаПартнера"", ТекСтрока.Ссылка);
			
			Если Параметры.МодальностьЗапрещена Тогда   
				Выполнить(""ОткрытьФормуОбъектаМодально(ПутьКФормам + """"Партнеры_ЭлементУправляемая"""", ПараметрыФормы,""""ОбработчикПослередактированияПартнера"""")"");//,ДополнительныеПараметры);
			Иначе
				ФормаЭлемента=ПолучитьФормуОбработки(""Партнеры_ЭлементУправляемая"",ПараметрыФормы);
				ФормаЭлемента.Параметры.СсылкаНаПартнера = ТекСтрока.Ссылка;
				ФормаЭлемента.ОткрытьМодально();
			КонецЕсли;
			
		КонецЕсли;
	КонецЕсли;
	
КонецПроцедуры


&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	Параметры.МодальностьЗапрещена=МодульОбъекта().МодальностьЗапрещена();
	ПутьКФормам = МодульОбъекта().Метаданные().ПолноеИмя() + "".Форма."";
	
	Если НЕ ОпределитьВидКомпанииСервер() = ""Поставщик"" Тогда
		Элементы.ФормаДобавитьТорговуюСеть.Видимость = Ложь;
	КонецЕсли;
	
КонецПроцедуры

&НаКлиенте
Процедура ОткрытьФормуОбъектаМодально(ИмяФормы, ПараметрыФормы = Неопределено, ИмяОбработчика = Неопределено, ПараметрыОбработчика = Неопределено, ВладелецОбработчика = Неопределено,РежимБлокирования = Неопределено)
	//отказ от модальности
	Если РежимБлокирования = Неопределено Тогда
		РежимБлокирования=	РежимОткрытияОкнаФормы.БлокироватьОкноВладельца;
	КонецЕсли;
	
	Если ВладелецОбработчика = Неопределено Тогда
		ВладелецОбработчика=	ЭтаФорма;
	КонецЕсли;
	
	Если ИмяОбработчика = Неопределено Тогда
		ОписаниеОбработчика=	Неопределено;
	Иначе	
		Выполнить(""ОписаниеОбработчика=	Новый ОписаниеОповещения(ИмяОбработчика, ВладелецОбработчика, ПараметрыОбработчика)"");
	КонецЕсли;
	
	Выполнить(""ОткрытьФорму(ИмяФормы, ПараметрыФормы, ВладелецОбработчика, , , ,  ОписаниеОбработчика, РежимБлокирования)"");
	
КонецПроцедуры

&НаКлиенте
Процедура ОбработчикПослередактированияПартнера(ПараметрыЗакрытияИнтерактивнойФормы=неопределено, ДополнительныеПараметры=неопределено) Экспорт
	Элементы.СписокПартнеров.Обновить();
КонецПроцедуры

&НаКлиенте
Процедура ДобавитьТорговуюСеть(Команда)
	
	ПараметрыФормы=	Новый Структура;
	ПараметрыФормы.Вставить(""ОткрытаКакДобавлениеПартнера"",Истина);
	
	Состояние(""Запрашиваю данные по сетям..."",30,,);
	
	Если ОпределитьВидКомпанииСервер() = ""Поставщик"" Тогда
		
		Если Параметры.МодальностьЗапрещена Тогда       
			Выполнить(""ОткрытьФормуОбъектаМодально(ПутьКФормам + """"Сервис_СтартовыйПомощникУправляемая"""", ПараметрыФормы,""""ОбработчикПослередактированияПартнера"""")"");//,ДополнительныеПараметры);
		Иначе
			
			ФормаЭлемента=ПолучитьФормуОбработки(""Сервис_СтартовыйПомощникУправляемая"",ПараметрыФормы);
			//ФормаЭлемента.СсылкаНаПартнера = ТекСтрока.Ссылка;
			ФормаЭлемента.ОткрытьМодально();
			ОбработчикПослередактированияПартнера();
		КонецЕсли;
	Иначе
		
		Если Параметры.МодальностьЗапрещена Тогда       
			Выполнить(""ОткрытьФормуОбъектаМодально(ПутьКФормам + """"Партнеры_ЭлементУправляемая"""", ПараметрыФормы,""""ОбработчикПослередактированияПартнера"""")"");//,ДополнительныеПараметры);
		Иначе
			
			ФормаЭлемента=ПолучитьФормуОбработки(""Партнеры_ЭлементУправляемая"",ПараметрыФормы);
			//ФормаЭлемента.СсылкаНаПартнера = ТекСтрока.Ссылка;
			ФормаЭлемента.ОткрытьМодально();
			ОбработчикПослередактированияПартнера()
		КонецЕсли;
	КонецЕсли;
	
КонецПроцедуры

&НаСервере
Функция ОпределитьВидКомпанииСервер()
	Возврат МодульОбъекта().ПолучитьВидКомпании();
КонецФункции

&НаКлиенте
Процедура ДобавитьТСВручную(Команда)
	ПараметрыФормы=	Новый Структура;
	Если Параметры.МодальностьЗапрещена Тогда  
		Выполнить(""ОткрытьФормуОбъектаМодально(ПутьКФормам + """"Партнеры_ЭлементУправляемая"""", ПараметрыФормы,""""ОбработчикПослередактированияПартнера"""")"");
	Иначе
		ФормаЭлемента=ПолучитьФормуОбработки(""Партнеры_ЭлементУправляемая"",ПараметрыФормы);
		ФормаЭлемента.ОткрытьМодально();
		ОбработчикПослередактированияПартнера()
	КонецЕсли;
КонецПроцедуры

&НаКлиенте
Процедура СписокПартнеровВыбор(Элемент, ВыбраннаяСтрока, Поле, СтандартнаяОбработка)
	СтандартнаяОбработка=Ложь;
	
	Если Параметры.ОткрытаКакВыбор Тогда
		ТекСтрока = Элементы.СписокПартнеров.ТекущиеДанные;
		Если ЗначениеЗаполнено(ТекСтрока.Ссылка) Тогда
			ЭтаФорма.Закрыть(ТекСтрока.Ссылка);
		КонецЕсли;
	иначе
		ОткрытьФормуТорговойСети();
	КонецЕсли;
	
КонецПроцедуры

&НаКлиенте
Процедура СписокПартнеровПередУдалением(Элемент, Отказ)
	отказ = истина;
КонецПроцедуры

&НаКлиенте
Процедура СписокПартнеровПередНачаломДобавления(Элемент, Отказ, Копирование, Родитель, Группа)
	отказ = истина;
КонецПроцедуры

&НаКлиенте
Процедура СписокПартнеровПередНачаломИзменения(Элемент, Отказ)
	// Вставить содержимое обработчика.
КонецПроцедуры

&НаКлиенте
Процедура УдалитьТорговуюСеть(Команда)
	
	ТекСтрока = Элементы.СписокПартнеров.ТекущиеДанные;
	
	
	
	Если НЕ ТекСтрока = Неопределено Тогда
		ТекстВопроса =""Партнер """"""+ТекСтрока.Наименование+"""""" будет удален. Продолжить?"";
		КнопкиВопроса=новый СписокЗначений;
		КнопкиВопроса.Добавить(""Да, удалить партнера"");
		КнопкиВопроса.Добавить(""Отмена"");
		ДопПараметрДляПередачиВОбработчик=ТекСтрока;
		РезультатВопроса = Неопределено;
		
		Если Параметры.МодальностьЗапрещена Тогда
			Выполнить(""ПоказатьВопрос(Новый ОписаниеОповещения(""""ОбработчикПодтвержденияУдаленияПартнера"""", ЭтаФорма, ДопПараметрДляПередачиВОбработчик), ТекстВопроса, КнопкиВопроса,,,""""EDI.Контур"""")"");
		Иначе
			РезультатВопроса = Вопрос(ТекстВопроса, КнопкиВопроса,,,""EDI.Контур"");
			ОбработчикПодтвержденияУдаленияПартнера(РезультатВопроса,ДопПараметрДляПередачиВОбработчик);
		КонецЕсли;	
		
	КонецЕсли;

	//Оповестить(""КонтурEDI_ОбновитьСписокПартнеров"");    //скорее всего не понадобится
	
КонецПроцедуры
&НаКлиенте
Процедура ОбработчикПодтвержденияУдаленияПартнера(РезультатВопроса,ДопПараметрПереданныйВОбработчик=Неопределено) Экспорт

	Если РезультатВопроса=""Да, удалить партнера"" Тогда
		УдалитьТорговуюСетьСервер(ДопПараметрПереданныйВОбработчик.Ссылка);
		Элементы.СписокПартнеров.Обновить();

	КонецЕсли;

КонецПроцедуры

&НаСервере
Процедура УдалитьТорговуюСетьСервер(СсылкаНаПартнера)

	МодульОбъекта().УдалитьЭлементСправочника(""Партнеры"",СсылкаНаПартнера);
	
КонецПроцедуры // УдалитьТорговуюСетьСервер()


",
{4,3,
{9,
{1},0,"Объект",
{1,0},
{"Pattern",
{"#",8c4601e1-5504-4f9a-8535-06152d8737be}
},
{0,
{0,
{"B",1},0}
},
{0,
{0,
{"B",1},0}
},
{0,0},
{0,0},1,0,0,0,
{0,0},
{0,0}
},
{9,
{2},0,"СписокПартнеров",
{1,1,
{"ru","Список партнеров"}
},
{"Pattern",
{"#",65abad24-838b-4987-8b35-ed9e2bd4d9c8}
},
{0,
{0,
{"B",1},0}
},
{0,
{0,
{"B",1},0}
},
{0,0},
{0,0},0,0,0,0,
{0,15,"QueryText",
{"S","ВЫБРАТЬ
	КонтурEDI_ДополнительныеСправочники.Ссылка,
	КонтурEDI_ДополнительныеСправочники.Наименование,
	ВЫРАЗИТЬ(ТаблицаРеквизитGLN.Значение КАК СТРОКА(13)) КАК GLN,
	ВЫРАЗИТЬ(ТаблицаРеквизитТорговаяСеть.Значение КАК БУЛЕВО) КАК ТорговаяСеть,
	ВЫРАЗИТЬ(ТаблицаРеквизитПоставщик.Значение КАК БУЛЕВО) КАК Поставщик
ИЗ
	Справочник.КонтурEDI_ДополнительныеСправочники КАК КонтурEDI_ДополнительныеСправочники
		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.КонтурEDI_ДополнительныеРеквизиты КАК ТаблицаРеквизитGLN
		ПО КонтурEDI_ДополнительныеСправочники.Ссылка = ТаблицаРеквизитGLN.Объект
			И (ТаблицаРеквизитGLN.Свойство = ""GLN_Партнера"")
		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.КонтурEDI_ДополнительныеРеквизиты КАК ТаблицаРеквизитТорговаяСеть
		ПО КонтурEDI_ДополнительныеСправочники.Ссылка = ТаблицаРеквизитТорговаяСеть.Объект
			И (ТаблицаРеквизитТорговаяСеть.Свойство = ""ПартнерКакТорговаяСеть"")
		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.КонтурEDI_ДополнительныеРеквизиты КАК ТаблицаРеквизитПоставщик
		ПО КонтурEDI_ДополнительныеСправочники.Ссылка = ТаблицаРеквизитПоставщик.Объект
			И (ТаблицаРеквизитПоставщик.Свойство = ""ПартнерКакПоставщик"")
ГДЕ
	КонтурEDI_ДополнительныеСправочники.ИмяСправочника = ""Партнеры""
	И НЕ КонтурEDI_ДополнительныеСправочники.ПометкаУдаления"},"MainTable",
{"#",fc01b5df-97fe-449b-83d4-218a090e681e,0ee85a51-4608-4c6d-bcd6-fd0ec389dd9c},"MainTableCategory",
{"N",1},"DynamicalDataSelection",
{"B",1},"ManualQuery",
{"B",1},"FiledsMapItemId0",
{"N",1},"FiledsMapItemName0",
{"S","Description"},"FiledsMapItemId1",
{"N",2},"FiledsMapItemName1",
{"S","GLN"},"FiledsMapItemId2",
{"N",3},"FiledsMapItemName2",
{"S","Ref"},"FiledsMapItemId3",
{"N",4},"FiledsMapItemName3",
{"S","Поставщик"},"FiledsMapItemId4",
{"N",5},"FiledsMapItemName4",
{"S","ТорговаяСеть"}
},
{0,0}
},
{9,
{3},0,"ПутьКФормам",
{1,1,
{"ru","Путь к формам"}
},
{"Pattern",
{"S"}
},
{0,
{0,
{"B",1},0}
},
{0,
{0,
{"B",1},0}
},
{0,0},
{0,0},0,0,0,0,
{0,0},
{0,0}
},0,1,"СписокПартнеров.Ссылка","СписокПартнеров.Ref",
{2,
{2},
{3}
},
{1,
{2}
},
{#base64:77u/PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxTZXR0
aW5ncyB4bWxucz0iaHR0cDovL3Y4LjFjLnJ1LzguMS9kYXRhLWNvbXBvc2l0aW9u
LXN5c3RlbS9zZXR0aW5ncyIgeG1sbnM6ZGNzY29yPSJodHRwOi8vdjguMWMucnUv
OC4xL2RhdGEtY29tcG9zaXRpb24tc3lzdGVtL2NvcmUiIHhtbG5zOnN0eWxlPSJo
dHRwOi8vdjguMWMucnUvOC4xL2RhdGEvdWkvc3R5bGUiIHhtbG5zOnN5cz0iaHR0
cDovL3Y4LjFjLnJ1LzguMS9kYXRhL3VpL2ZvbnRzL3N5c3RlbSIgeG1sbnM6djg9
Imh0dHA6Ly92OC4xYy5ydS84LjEvZGF0YS9jb3JlIiB4bWxuczp2OHVpPSJodHRw
Oi8vdjguMWMucnUvOC4xL2RhdGEvdWkiIHhtbG5zOndlYj0iaHR0cDovL3Y4LjFj
LnJ1LzguMS9kYXRhL3VpL2NvbG9ycy93ZWIiIHhtbG5zOndpbj0iaHR0cDovL3Y4
LjFjLnJ1LzguMS9kYXRhL3VpL2NvbG9ycy93aW5kb3dzIiB4bWxuczp4cz0iaHR0
cDovL3d3dy53My5vcmcvMjAwMS9YTUxTY2hlbWEiIHhtbG5zOnhzaT0iaHR0cDov
L3d3dy53My5vcmcvMjAwMS9YTUxTY2hlbWEtaW5zdGFuY2UiPg0KCTxjb25kaXRp
b25hbEFwcGVhcmFuY2U+DQoJCTxpdGVtPg0KCQkJPHNlbGVjdGlvbj4NCgkJCQk8
aXRlbT4NCgkJCQkJPGZpZWxkPtCh0L/QuNGB0L7QutCf0LDRgNGC0L3QtdGA0L7Q
stCh0YHRi9C70LrQsDwvZmllbGQ+DQoJCQkJPC9pdGVtPg0KCQkJPC9zZWxlY3Rp
b24+DQoJCQk8ZmlsdGVyPg0KCQkJCTxpdGVtIHhzaTp0eXBlPSJGaWx0ZXJJdGVt
Q29tcGFyaXNvbiI+DQoJCQkJCTxsZWZ0IHhzaTp0eXBlPSJkY3Njb3I6RmllbGQi
PtCh0L/QuNGB0L7QutCf0LDRgNGC0L3QtdGA0L7Qsi7QodGB0YvQu9C60LA8L2xl
ZnQ+DQoJCQkJCTxjb21wYXJpc29uVHlwZT5FcXVhbDwvY29tcGFyaXNvblR5cGU+
DQoJCQkJCTxyaWdodCB4c2k6dHlwZT0iZGNzY29yOkZpZWxkIj7QodC/0LjRgdC+
0LrQn9Cw0YDRgtC90LXRgNC+0LIu0KHRgdGL0LvQutCwPC9yaWdodD4NCgkJCQk8
L2l0ZW0+DQoJCQk8L2ZpbHRlcj4NCgkJCTxhcHBlYXJhbmNlPg0KCQkJCTxkY3Nj
b3I6aXRlbSB4c2k6dHlwZT0iU2V0dGluZ3NQYXJhbWV0ZXJWYWx1ZSI+DQoJCQkJ
CTxkY3Njb3I6cGFyYW1ldGVyPtCS0LjQtNC40LzQvtGB0YLRjDwvZGNzY29yOnBh
cmFtZXRlcj4NCgkJCQkJPGRjc2Nvcjp2YWx1ZSB4c2k6dHlwZT0ieHM6Ym9vbGVh
biI+ZmFsc2U8L2Rjc2Nvcjp2YWx1ZT4NCgkJCQk8L2Rjc2NvcjppdGVtPg0KCQkJ
PC9hcHBlYXJhbmNlPg0KCQk8L2l0ZW0+DQoJPC9jb25kaXRpb25hbEFwcGVhcmFu
Y2U+DQo8L1NldHRpbmdzPg==}
},
{0,2,
{0,"МодальностьЗапрещена",
{"Pattern",
{"B"}
},1},
{0,"ОткрытаКакВыбор",
{"Pattern",
{"B"}
},1}
},
{0,4,
{6,
{1,409b9a53-7f7e-4178-86c1-33176c7c7a7a},"Открыть",
{1,1,
{"ru","Открыть"}
},
{1,1,
{"ru","Открыть"}
},
{0,
{0,
{"B",1},0}
},
{0,0,0},
{3,0,
{0},"",-1,-1,1,0},"КоманднаяПанельТСОткрыть",3,0,0,
{0,0}
},
{6,
{2,409b9a53-7f7e-4178-86c1-33176c7c7a7a},"ДобавитьТорговуюСеть",
{1,1,
{"ru","Добавить торговую сеть"}
},
{1,1,
{"ru","Добавить торговую сеть"}
},
{0,
{0,
{"B",1},0}
},
{0,0,0},
{3,0,
{0},"",-1,-1,1,0},"ДобавитьТорговуюСеть",3,0,0,
{0,0}
},
{6,
{3,409b9a53-7f7e-4178-86c1-33176c7c7a7a},"УдалитьТорговуюСеть",
{1,1,
{"ru","Удалить партнера"}
},
{1,1,
{"ru","Удалить торговую сеть"}
},
{0,
{0,
{"B",1},0}
},
{0,0,0},
{3,0,
{0},"",-1,-1,1,0},"УдалитьТорговуюСеть",3,0,0,
{0,0}
},
{6,
{4,409b9a53-7f7e-4178-86c1-33176c7c7a7a},"ДобавитьТСВручную",
{1,1,
{"ru","Добавить партнера вручную"}
},
{1,1,
{"ru","Добавить ТСВручную"}
},
{0,
{0,
{"B",1},0}
},
{0,0,0},
{3,0,
{0},"",-1,-1,1,0},"ДобавитьТСВручную",3,0,0,
{0,0}
}
},
{0,0},
{0,0}
}